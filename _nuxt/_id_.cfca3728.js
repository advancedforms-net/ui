import{i as W,j as ne,k as D,l as X,m as M,o as i,p as C,q as _,u as e,r as $,s as E,t as re,v as Y,x as Z,y as ie,z as de,A as ce,B as ue,e as h,a as t,c as k,w as o,C as pe,D as ee,b as m,F as T,G as S,H as Q,I as z,J as me,K as fe,L as _e,M as ve,N as ge,O as be,P as ye,Q as Ee,R as ke,S as Ce,T as he}from"./entry.e7d4803d.js";import{E as j,a as we,b as $e,c as N,d as Se,v as te}from"./index.0db7f8fe.js";import{G as De,E as Pe,f as J,a as Ve,b as Ie,c as Te,d as Be,e as Fe,_ as He}from"./empty.ba88b86b.js";import{E as ze}from"./space.477ae777.js";import{E as K}from"./message-box.6c9f2e93.js";const Me=W({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ne(String),default:"solid"}}),Ne=D({name:"ElDivider"}),Oe=D({...Ne,props:Me,setup(w){const f=w,d=X("divider"),p=M(()=>d.cssVar({"border-style":f.borderStyle}));return(s,l)=>(i(),C("div",{class:_([e(d).b(),e(d).m(s.direction)]),style:re(e(p)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?(i(),C("div",{key:0,class:_([e(d).e("text"),e(d).is(s.contentPosition)])},[$(s.$slots,"default")],2)):E("v-if",!0)],6))}});var Ue=Y(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const oe=Z(Ue),qe=W({icon:{type:ie,default:()=>de},title:String,content:{type:String,default:""}}),Ae={back:()=>!0},Re=["aria-label"],Le=D({name:"ElPageHeader"}),Ge=D({...Le,props:qe,emits:Ae,setup(w,{emit:f}){const d=ce(),{t:p}=ue(),s=X("page-header"),l=M(()=>[s.b(),{[s.m("has-breadcrumb")]:!!d.breadcrumb,[s.m("has-extra")]:!!d.extra,[s.is("contentful")]:!!d.default}]);function c(){f("back")}return(n,P)=>(i(),C("div",{class:_(e(l))},[n.$slots.breadcrumb?(i(),C("div",{key:0,class:_(e(s).e("breadcrumb"))},[$(n.$slots,"breadcrumb")],2)):E("v-if",!0),h("div",{class:_(e(s).e("header"))},[h("div",{class:_(e(s).e("left"))},[h("div",{class:_(e(s).e("back")),role:"button",tabindex:"0",onClick:c},[n.icon||n.$slots.icon?(i(),C("div",{key:0,"aria-label":n.title||e(p)("el.pageHeader.title"),class:_(e(s).e("icon"))},[$(n.$slots,"icon",{},()=>[n.icon?(i(),k(e(ee),{key:0},{default:o(()=>[(i(),k(pe(n.icon)))]),_:1})):E("v-if",!0)])],10,Re)):E("v-if",!0),h("div",{class:_(e(s).e("title"))},[$(n.$slots,"title",{},()=>[m(T(n.title||e(p)("el.pageHeader.title")),1)])],2)],2),t(e(oe),{direction:"vertical"}),h("div",{class:_(e(s).e("content"))},[$(n.$slots,"content",{},()=>[m(T(n.content),1)])],2)],2),n.$slots.extra?(i(),C("div",{key:0,class:_(e(s).e("extra"))},[$(n.$slots,"extra")],2)):E("v-if",!0)],2),n.$slots.default?(i(),C("div",{key:1,class:_(e(s).e("main"))},[$(n.$slots,"default")],2)):E("v-if",!0)],2))}});var Qe=Y(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const je=Z(Qe),x=new De("Presets"),Je=D({__name:"presetCreate",props:{form:null,hideSubmit:{type:Boolean},data:null},emits:["created"],setup(w,{expose:f,emit:d}){const p=w,s=S(!1),l=S(),c=Q(p.data??{formId:p.form.id,templateId:null,description:"",code:"",values:{}}),n=Q({description:[{required:!0,message:"Please input description",trigger:"blur"},{min:3,message:"Description should be longer then 3 characters",trigger:"blur"}],code:[{required:p.form.useCodes,message:"Please input a code",trigger:"blur"},{min:3,message:"Code should be longer then 3 characters",trigger:"blur"}]});function P(u){return"id"in u}async function g(){if(l.value){s.value=!0;try{await l.value.validate();const u=P(c)?await x.update(c.id,c):await x.create(c);j.success("Form saved."),d("created",u)}catch{j.error("Oops, something went wrong during the save.")}s.value=!1}}function B(){var u;(u=l.value)==null||u.resetFields()}return f({submit:g,reset:B}),(u,a)=>{const r=we,b=$e,V=N,v=Se,H=te;return z((i(),k(v,{ref_key:"form",ref:l,"status-icon":"","require-asterisk-position":"right",model:e(c),rules:e(n),onSubmit:me(g,["prevent"])},{default:o(()=>[t(b,{label:"Description",prop:"description"},{default:o(()=>[t(r,{modelValue:e(c).description,"onUpdate:modelValue":a[0]||(a[0]=F=>e(c).description=F)},null,8,["modelValue"])]),_:1}),p.form.useCodes?(i(),k(b,{key:0,label:"Code",prop:"code"},{default:o(()=>[t(r,{modelValue:e(c).code,"onUpdate:modelValue":a[1]||(a[1]=F=>e(c).code=F)},null,8,["modelValue"])]),_:1})):E("",!0),p.hideSubmit?E("",!0):(i(),k(b,{key:1},{default:o(()=>[t(V,{type:"primary",onClick:g},{default:o(()=>[m(" Create ")]),_:1})]),_:1}))]),_:1},8,["model","rules","onSubmit"])),[[H,e(s)]])}}}),Ke={class:"dialog-footer"},xe=D({__name:"presetCreateDialog",props:{form:null,data:null},emits:["created"],setup(w,{expose:f,emit:d}){const p=w,s=S(!1),l=S(),c=M(()=>p.data?"Edit form":"Create new form");function n(){var u;(u=l.value)==null||u.reset()}function P(){s.value=!0}function g(){n(),s.value=!1}function B(u){d("created",u),g()}return f({visible:s,open:P,close:g}),(u,a)=>{const r=N,b=Pe;return i(),C("div",null,[t(b,{modelValue:e(s),"onUpdate:modelValue":a[1]||(a[1]=V=>fe(s)?s.value=V:null),title:e(c),onClosed:n},{footer:o(()=>[h("span",Ke,[t(r,{onClick:g},{default:o(()=>[m(" Cancel ")]),_:1}),t(r,{type:"primary",onClick:a[0]||(a[0]=V=>{var v;return(v=e(l))==null?void 0:v.submit()})},{default:o(()=>[m(" Confirm ")]),_:1})])]),default:o(()=>[t(e(Je),{ref_key:"dialogElement",ref:l,form:p.form,data:p.data,"hide-submit":"",onCreated:B},null,8,["form","data"])]),_:1},8,["modelValue","title"])])}}});const tt=D({__name:"[id]",async setup(w){let f,d;const s=_e().params.id,l=S(([f,d]=ve(()=>J.get(s)),f=await f,d(),f)),c=S(),n=S();function P(){ge().back()}function g(a){l.value=a}async function B(a){l.value=await J.get(s)}function u(){var a;(a=n.value)==null||a.open()}return(a,r)=>{const b=be,V=oe,v=N,H=Ve,F=ye,se=Ie,ae=je,I=Te,O=Ee,U=ee,q=ke,A=Be,R=ze,le=Fe,L=te;return i(),k(R,{fill:"",direction:"vertical",style:{width:"100%"}},{default:o(()=>[t(ae,{onBack:r[3]||(r[3]=y=>P())},{content:o(()=>[h("div",null,[t(b,{size:"large"},{default:o(()=>[m(T(e(l).name),1)]),_:1}),t(V,{direction:"vertical","border-style":"none"}),t(b,{size:"small",type:"info",style:{color:"var(--el-text-color-regular)"}},{default:o(()=>[m(T(e(l).id),1)]),_:1})])]),extra:o(()=>[h("div",null,[t(v,{onClick:r[0]||(r[0]=y=>("ElMessageBox"in a?a.ElMessageBox:e(K)).alert("TODO"))},{default:o(()=>[m(" Export ")]),_:1}),t(v,{type:"primary",onClick:r[1]||(r[1]=y=>{var G;return(G=e(c))==null?void 0:G.open()})},{default:o(()=>[m(" Edit ")]),_:1})])]),default:o(()=>[t(se,{column:2,size:"small",border:!0},{default:o(()=>[t(H,{label:"Description"},{default:o(()=>[m(T(e(l).description),1)]),_:1}),t(H,{label:"Use codes"},{default:o(()=>[t(F,{modelValue:e(l).useCodes,"onUpdate:modelValue":r[2]||(r[2]=y=>e(l).useCodes=y),"inline-prompt":"",disabled:"","active-icon":"ElIconCheck"in a?a.ElIconCheck:e(Ce),"inactive-icon":"ElIconClose"in a?a.ElIconClose:e(he)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1})]),_:1})]),_:1}),z((i(),k(A,{data:e(l).presetTemplates,"table-layout":"auto","empty-text":"No templates"},{default:o(()=>[t(I,{label:"Templates",prop:"description",sortable:""}),t(I,{align:"right"},{header:o(()=>[t(q,{content:"Templates can be used to share values over multiple presets.",placement:"left-start"},{default:o(()=>[t(U,null,{default:o(()=>[t(O)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])),[[L,!1]]),t(v,{onClick:r[4]||(r[4]=y=>("ElMessageBox"in a?a.ElMessageBox:e(K)).alert("TODO"))},{default:o(()=>[m(" Add template ")]),_:1}),t(v,{onClick:r[5]||(r[5]=y=>u())},{default:o(()=>[m(" Add preset ")]),_:1}),z((i(),k(A,{data:e(l).presets,"table-layout":"auto"},{empty:o(()=>[t(le,{description:"No presets"},{default:o(()=>[t(R,{direction:"vertical"},{default:o(()=>[t(b,null,{default:o(()=>[m("Create your first preset to start collecting responses.")]),_:1}),t(v,{type:"primary",onClick:r[6]||(r[6]=y=>u())},{default:o(()=>[m(" Add preset ")]),_:1})]),_:1})]),_:1})]),default:o(()=>[t(I,{label:"presets",prop:"description",sortable:""}),e(l).useCodes?(i(),k(I,{key:0,label:"code",prop:"code",sortable:""})):E("",!0),t(I,{label:"responses",prop:"responses",sortable:""},{default:o(y=>[m(T(y.row.responses.length),1)]),_:1}),t(I,{align:"right"},{header:o(()=>[t(q,{content:"Presets are where the response get registered to. This is where the code for a response is defined and where you can overide template values. There should always be a preset even if no codes are used. In that case there will only be one default preset without code.",placement:"left-start"},{default:o(()=>[t(U,null,{default:o(()=>[t(O)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])),[[L,!1]]),t(e(He),{ref_key:"formDialogElement",ref:c,data:e(l),onCreated:g},null,8,["data"]),t(e(xe),{ref_key:"presetDialogElement",ref:n,form:e(l),data:void 0,onCreated:B},null,8,["form"])]),_:1})}}});export{tt as default};
